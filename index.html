<html>
    <head>
        <meta name='viewport' content='width=device-width'/>
        <link rel="stylesheet" href="ui.css">
        <link rel="stylesheet" href="selector.css">
        <title>Pixel Renderer</title>
        <style>
            body {margin: 0;}
            canvas {width: 100%; height: 100%};
            #header{background-color: #2E2E2E; width: 100%; height: 100%}
        </style>
    </head>

    <body>
        <div id="main" class="parent">

            <div id="header" class="header">
                <p class="header-logo">Pixel Renderer</p>
                <input type="file" name="loader" id="loader" class="header-content"onchange="changeCubeColor()"/>
            </div>
            
            <div id="selector" class="selector">
                <div id="info">
                    <button type="button" id="add_char_btn" class="add-character-btn"><b>+</b> Add New Character</button>
                    <div id="character-list" >
                    <char-element></char-element>
                    </div>
                </div>
            </div>

            <div id="material" class=material></div>

            <div id="preview" class=preview>,
                <div class="slidecontainer">
                    <input type="range" min="0.1" max="1" step="0.01" value="1" class="slider" id="slider" onchange="">
                </div>
                <script src="three/three.js"></script>
                <script id="xesq" class=preview>

                    container = document.getElementById("preview")
                    var scene = new THREE.Scene();
                    scene.background = new THREE.Color(0xf5f5f5);
                    
                    scr_x_size = (window.innerWidth-(window.innerWidth*0.45)-12);
                    scr_y_size = (window.innerHeight-(window.innerHeight*0.07));
                    var aspect = scr_x_size/scr_y_size;
                    var frustum_size = 5;

                    var camera = new THREE.OrthographicCamera(aspect*frustum_size/-2, aspect*frustum_size/2, frustum_size/2, frustum_size/-2, 0.1, 100);
                    var renderer = new THREE.WebGLRenderer({antialias: false});
                    
                    var ratio = 1;
                    renderer.setSize( scr_x_size, scr_y_size);
                    
                    
                    container.appendChild(renderer.domElement);
                    var geometry = new THREE.BoxGeometry( 1, 1, 1 );
                    var material = new THREE.MeshBasicMaterial( { color: 0x00ff00 } );
                    var cube = new THREE.Mesh( geometry, material );
                    scene.add( cube );
                    camera.position.z = 5;
                    
                    
                    var slider = document.getElementById("slider");
                    slider.addEventListener("input", function(){ratio=slider.value; slider.change()});
                    window.addEventListener( 'resize', onWindowResize, false );
                    
                    function onWindowResize()
                    {
                        scr_x_size = (window.innerWidth-(window.innerWidth*0.45)-12);
                        scr_y_size = (window.innerHeight-(window.innerHeight*0.07));
                        aspect = scr_x_size/scr_y_size;
                        
                        camera.left = aspect*frustum_size/-2;
                        camera.right = aspect*frustum_size/2;
                        camera.top = frustum_size/2;
                        camera.bottom = frustum_size/-2;
                        
                        camera.updateProjectionMatrix();
                        renderer.setSize( scr_x_size, scr_y_size);
                    }    

                    function changeCubeColor()
                    {
                        console.log("oia");
                        cube.material.color.setHex(Math.random()*0xffffff);
                    }

                    var update = function()
                    {
                        renderer.setPixelRatio(ratio);
                    };
            
                    var render = function()
                    {
                        renderer.render(scene, camera);
                    };
            
                    var GameLoop = function()
                    {
                        cube.rotation.x += 0.01;
                        cube.rotation.y += 0.01;
                        requestAnimationFrame(GameLoop);
                        update();
                        render();
                    }
                    GameLoop();
                </script>
            </div>
            
        </div>

        <script src="Character/InputNode.js"></script>
        <script src="Character/CharacterElement.js"></script>
        <script src="Character/CharacterList.js"></script>
        <script src="Character/AnimList.js"></script>
            
    </body>
</html>